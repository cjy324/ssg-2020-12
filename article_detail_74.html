<!doctype html>
<html lang="en">

<head>
<script data-ad-client="ca-pub-7996879977557531" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X5RMP83794"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X5RMP83794');
</script>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 구글 검색엔진 등록-소유권 확인 -->
<meta name="google-site-verification" content="37R4KcEaJU5LfiKL7GI1hu1_spJgWOazN6xy48OHhD4" />

<!-- Meta Tag & Open Graph -->
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=1200">
<meta name="apple-mobile-web-app-title" content="Dev_J BLOG" />
<!-- 메타태그정보 //-->
<!-- META -->
<link rel="canonical" href="https://blog.devj.me" />
<meta name="subject" content="P.Lamplight - 개발일지(멤버쪼개기 완료, funeral 테이블 추가, 요청수락, 진행단계별 버튼 변경 기능 구현까지)"/>
<meta name="title" content="Dev_J BLOG" />
<meta name="keywords" content="JAVA, HTML, CSS, JavaScript, MySQL" />
<meta name="copyright" content="Dev_J BLOG" />
<meta name="pubdate" content="2021-04-24T15:02:49" />
<meta name="lastmod" content="2021-04-24T15:02:49" />
<!-- OPENGRAPH -->
<meta property="og:site_name" content="Dev_J BLOG" />
<meta property="og:type" content="blog" />
<meta property="og:title" content="P.Lamplight - 개발일지(멤버쪼개기 완료, funeral 테이블 추가, 요청수락, 진행단계별 버튼 변경 기능 구현까지)" />
<meta property="og:description" content=" 멤버쪼개기 완료 funeral 테이블 추가 요청수락 진행단계별 버튼 변경 기능 구현까지

 NOTE


프론트엔드

Todo
의뢰인 요청  검토수락  수락진행  종료요청최종종료까지
 1사이클 실행
요청서에서 승인버튼 누르면 장례클래스 생성
도우미 마무리
 장례클래스 생성
 장례클래스와 연관된 도우미 테이블 생성
 모든 장례리스팅
 도우미전문가의 현재 진행중인 my장례 리스팅
  장례리스트에 도우미 현황 나오기

 장례에 도우미 지원
 전문가에서 장례별 도우미 지원현황 확인 후 수락
 도우미에서 내 지원현황 확인취소



백엔드

funeral funeralRelAssts 테이블 추가


br
 주요소스코드

 FuneralListPagevue
html
template
   메인장례 리스트 시작 
  section classfuneralListsection bggray500
    div classh2 bggray500div
    리스트 search 시작
    div classflex h10 funeralListsectionsearch m2 textright roundedmd
      select refselectStepLevelElRef classhfull w14 roundedlmd id changeonChangeStepLevel
        option value0진행단계 전체option
        option value1요청서 검토중option
        option value2장례준비중option
        option value3장례진행중option
        option value4장례종료확인대기중option
        option value5장례종료최종종료option
      select
      select classhfull w14 id changeonChangeSearchKeywordTypeevent
        option valuetitle제목option
        option valuebody내용option
        option valuefuneralHome장례식장option
      select
      input idsearchKeywordElRef refsearchKeywordElRef classhfull wfull pl4 typetext placeholder검색어 입력 valuesearchKeyword keyupenteronInputevent 
      button classw20 textwhite roundedrmd bgblue500 typebutton clickonClickInput검색button
    div
    리스트 search 끝
    리스트 grid 시작
    div classfuneralListsectiongrid grid gridcols1 mdgridcols3 gap3 overflowhidden
      리스트 gridbody 시작
      div classmt6 vbindkeyfuneralid vforfuneral in filteredFunerals
      div classfuneralListsectiongridbody p8 bgwhite m2 border roundedxl
        진행단계
        div classbtnsuccess
          진행단계 returnToStringfuneralstepLevel
        div
        제목
        div classtextcenter m4
          routerlink tofuneraldetailid  funeralid classtextindigo500 fontbold textxl mdtext2xl hovertextgray700
             funeraltitle 
          routerlink
        div
        담당지도사
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          담당지도사 funeralextraexpertName
        h1
        의뢰인명
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          의뢰인 funeralextraclientName
        h1
         장례식장
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          장례식장 funeralfuneralHome
        h1
        예상인원
        div classmaxwfull border mt2 p1 pl2 roundedmd
          예상인원
          p classtextbase fontmedium trackingwide textgray600 mt1
               funeralhead 
          p
        div
        종교
        div classmaxwfull border mt2 p1 pl2 roundedmd
          종교
          p classtextbase fontmedium trackingwide textgray600 mt1
               funeralreligion 
          p
        div
        장례기간
        div classmaxwfull border mt2 p1 pl2 roundedmd
          장례기간
          p classtextbase fontmedium trackingwide textgray600 mt1
             시작일  funeralstartDate   종료일  funeralendDate 
          p
        div
        div
          도우미 현황
          div vbindkeyassistantid vforassistant in funeralextraassistantsslice03
             assistantname  도우미
          div
        div
        routerlink tofuneraldetailid  funeralid classblock btnprimary mt2 h10 wfull roundedmd
            상세보기
        routerlink
        routerlink tofuneraldoApplyfuneralId  funeralid classblock btnsecondary mt2 h10 wfull roundedmd
            지원하기
        routerlink
        
      div
      div
      리스트 gridbody 끝
    div
    리스트 grid 끝
  section
   메인지도사 리스트 끝 

template

script langts
import  defineComponent reactive ref getCurrentInstance onMounted computed watch  from vue
import  IFuneral  from types
import  MainApi  from apis

const searchKeywordElRef  refHTMLInputElement
const selectStepLevelElRef  refHTMLInputElement

export default defineComponent
  name FuneralListPageForAsst

props 속성은 컴포넌트 간에 데이터를 전달할 수 있는 컴포넌트 통신 방법입니다 
props 속성을 기억할 때는 상위 컴포넌트에서 하위 컴포넌트로 내려보내는 데이터 속성으로 기억하면 쉽습니다
  props 
    globalShare 
      type Object
      required true
    
  

  setupprops
    const mainApiMainApi  getCurrentInstanceappContextconfigglobalPropertiesmainApi

    const state  reactive
      funerals  as IFuneral
      searchKeyword  as string
      result as string
      selectStepLevel 0
    

    let searchKeywordType  title

    function onInputeventany
      statesearchKeyword  eventtargetvalue
      return statesearchKeyword
    

    function onClickInput 
      ifsearchKeywordElRefvalue  undefined
        return
      

      statesearchKeyword  searchKeywordElRefvaluevalue
      return statesearchKeyword
    

    function onChangeSearchKeywordTypeeventany
      searchKeywordType  eventtargetvalue
      return searchKeywordType
    


    function onChangeStepLevel 

      ifselectStepLevelElRefvalue  undefined
        return
      
      stateselectStepLevel  parseIntselectStepLevelElRefvaluevalue
      return stateselectStepLevel
    

    function returnToStringstepLevelany 
      let stepLevelToStr   
      ifstepLevel  1
        stepLevelToStr  의뢰요청의뢰검토중
      
      ifstepLevel  2
        stepLevelToStr  의뢰승인장례준비중
      
      ifstepLevel  3
        stepLevelToStr  장례진행중
      
      ifstepLevel  4
        stepLevelToStr  장례종료종료확인요청
      
      ifstepLevel  5
        stepLevelToStr  종료확인최종종료
      

      return stepLevelToStr
    

    alert1
    const filteredFunerals  computed  
      alert2
      stateresult  statesearchKeyword

      let filteredFunerals  statefunerals
      
      filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralstepLevel  stateselectStepLevel
      ifstateselectStepLevel  0
        ifsearchKeywordType  title
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeraltitleincludesstatesearchKeyword
      
      ifsearchKeywordType  body
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralbodyincludesstatesearchKeyword
      
      ifsearchKeywordType  funeralHome
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralfuneralHomeincludesstatesearchKeyword
      
      
      else
        ifsearchKeywordType  title
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeraltitleincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      ifsearchKeywordType  body
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralbodyincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      ifsearchKeywordType  funeralHome
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralfuneralHomeincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      

      return filteredFunerals
    


    function loadFunerals
      alert4
      mainApifunerallist
      thenaxiosResponse  
          statefunerals  axiosResponsedatabodyfunerals
      

    

     onMounted 바로 실행하는 것이 아닌 모든 것이 준비되었을때 실행됨
    onMounted  
      alert3
      loadFunerals
    


    return
      state
      filteredFunerals
      searchKeywordElRef
      onInput
      onClickInput
      returnToString
      onChangeSearchKeywordType
      onChangeStepLevel
      selectStepLevelElRef

    

  

script


style scoped
 httpstailwindcomponentscomcomponentblogspostscard 
funeralListsectiongridbody
  minwidth 400px


style


 DB
sql
 장례 테이블 생성
CREATE TABLE funeral 
    id INT10 UNSIGNED NOT NULL PRIMARY KEY AUTOINCREMENT
    regDate DATETIME NOT NULL
    updateDate DATETIME NOT NULL
    head INT10 UNSIGNED NOT NULL 예상인원수
    religion CHAR200 NOT NULL 종교
    startDate DATE NOT NULL 장례시작일
    endDate DATE NOT NULL 장례종료일
    title CHAR200 NOT NULL 
    body TEXT NOT NULL 상세요구사항
    funeralHome CHAR200 NOT NULL 장례식장
    expertId INT10 UNSIGNED NOT NULL
    clientId INT10 UNSIGNED NOT NULL
    stepLevel SMALLINT2 UNSIGNED DEFAULT 2 NOT NULL COMMENT 2의뢰승인장례진행중3장례종료종료확인요청4종료확인최종종료


 장례와 관련된 도우미 그룹 테이블 생성
CREATE TABLE funeralRelAssts
    id INT10 UNSIGNED NOT NULL PRIMARY KEY AUTOINCREMENT
    funeralId INT10 UNSIGNED NOT NULL
    assistantId INT10 UNSIGNED NOT NULL


 도우미가 진행중인 장례 리스팅
SELECT F
IFNULLCname 탈퇴회원 AS extraclientName
IFNULLEname 탈퇴회원 AS extraexpertName
FROM funeral AS F
LEFT JOIN client AS C
ON FclientId  Cid
LEFT JOIN expert AS E
ON FexpertId  Eid
WHERE Fid  
SELECT funeralId 
FROM funeralRelAssts
WHERE assistantId  1

ORDER BY Fid DESC
" />
<meta property="og:locale" content="ko_KR" />
<meta property="og:image" content="images/Dev_J_logo/logo.png" />
<meta property="og:image:alt" content="blog.devj.me" />
<meta property="og:image:width" content="486" />
<meta property="og:image:height" content="254" />
<meta property="og:updated_time" content="2021-04-24T15:02:49"/>
<meta property="og:pubdate" content="2021-04-24T15:02:49" />
<meta property="og:url" content="https://blog.devj.me" />
<!-- TWITTER -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="P.Lamplight - 개발일지(멤버쪼개기 완료, funeral 테이블 추가, 요청수락, 진행단계별 버튼 변경 기능 구현까지)" />
<meta name="twitter:site" content="@Dev_J BLOG" />
<meta name="twitter:creator" content="@Dev_J BLOG" />
<meta name="twitter:image" content="images/Dev_J_logo/logo.png">
<meta name="twitter:description" content=" 멤버쪼개기 완료 funeral 테이블 추가 요청수락 진행단계별 버튼 변경 기능 구현까지

 NOTE


프론트엔드

Todo
의뢰인 요청  검토수락  수락진행  종료요청최종종료까지
 1사이클 실행
요청서에서 승인버튼 누르면 장례클래스 생성
도우미 마무리
 장례클래스 생성
 장례클래스와 연관된 도우미 테이블 생성
 모든 장례리스팅
 도우미전문가의 현재 진행중인 my장례 리스팅
  장례리스트에 도우미 현황 나오기

 장례에 도우미 지원
 전문가에서 장례별 도우미 지원현황 확인 후 수락
 도우미에서 내 지원현황 확인취소



백엔드

funeral funeralRelAssts 테이블 추가


br
 주요소스코드

 FuneralListPagevue
html
template
   메인장례 리스트 시작 
  section classfuneralListsection bggray500
    div classh2 bggray500div
    리스트 search 시작
    div classflex h10 funeralListsectionsearch m2 textright roundedmd
      select refselectStepLevelElRef classhfull w14 roundedlmd id changeonChangeStepLevel
        option value0진행단계 전체option
        option value1요청서 검토중option
        option value2장례준비중option
        option value3장례진행중option
        option value4장례종료확인대기중option
        option value5장례종료최종종료option
      select
      select classhfull w14 id changeonChangeSearchKeywordTypeevent
        option valuetitle제목option
        option valuebody내용option
        option valuefuneralHome장례식장option
      select
      input idsearchKeywordElRef refsearchKeywordElRef classhfull wfull pl4 typetext placeholder검색어 입력 valuesearchKeyword keyupenteronInputevent 
      button classw20 textwhite roundedrmd bgblue500 typebutton clickonClickInput검색button
    div
    리스트 search 끝
    리스트 grid 시작
    div classfuneralListsectiongrid grid gridcols1 mdgridcols3 gap3 overflowhidden
      리스트 gridbody 시작
      div classmt6 vbindkeyfuneralid vforfuneral in filteredFunerals
      div classfuneralListsectiongridbody p8 bgwhite m2 border roundedxl
        진행단계
        div classbtnsuccess
          진행단계 returnToStringfuneralstepLevel
        div
        제목
        div classtextcenter m4
          routerlink tofuneraldetailid  funeralid classtextindigo500 fontbold textxl mdtext2xl hovertextgray700
             funeraltitle 
          routerlink
        div
        담당지도사
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          담당지도사 funeralextraexpertName
        h1
        의뢰인명
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          의뢰인 funeralextraclientName
        h1
         장례식장
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          장례식장 funeralfuneralHome
        h1
        예상인원
        div classmaxwfull border mt2 p1 pl2 roundedmd
          예상인원
          p classtextbase fontmedium trackingwide textgray600 mt1
               funeralhead 
          p
        div
        종교
        div classmaxwfull border mt2 p1 pl2 roundedmd
          종교
          p classtextbase fontmedium trackingwide textgray600 mt1
               funeralreligion 
          p
        div
        장례기간
        div classmaxwfull border mt2 p1 pl2 roundedmd
          장례기간
          p classtextbase fontmedium trackingwide textgray600 mt1
             시작일  funeralstartDate   종료일  funeralendDate 
          p
        div
        div
          도우미 현황
          div vbindkeyassistantid vforassistant in funeralextraassistantsslice03
             assistantname  도우미
          div
        div
        routerlink tofuneraldetailid  funeralid classblock btnprimary mt2 h10 wfull roundedmd
            상세보기
        routerlink
        routerlink tofuneraldoApplyfuneralId  funeralid classblock btnsecondary mt2 h10 wfull roundedmd
            지원하기
        routerlink
        
      div
      div
      리스트 gridbody 끝
    div
    리스트 grid 끝
  section
   메인지도사 리스트 끝 

template

script langts
import  defineComponent reactive ref getCurrentInstance onMounted computed watch  from vue
import  IFuneral  from types
import  MainApi  from apis

const searchKeywordElRef  refHTMLInputElement
const selectStepLevelElRef  refHTMLInputElement

export default defineComponent
  name FuneralListPageForAsst

props 속성은 컴포넌트 간에 데이터를 전달할 수 있는 컴포넌트 통신 방법입니다 
props 속성을 기억할 때는 상위 컴포넌트에서 하위 컴포넌트로 내려보내는 데이터 속성으로 기억하면 쉽습니다
  props 
    globalShare 
      type Object
      required true
    
  

  setupprops
    const mainApiMainApi  getCurrentInstanceappContextconfigglobalPropertiesmainApi

    const state  reactive
      funerals  as IFuneral
      searchKeyword  as string
      result as string
      selectStepLevel 0
    

    let searchKeywordType  title

    function onInputeventany
      statesearchKeyword  eventtargetvalue
      return statesearchKeyword
    

    function onClickInput 
      ifsearchKeywordElRefvalue  undefined
        return
      

      statesearchKeyword  searchKeywordElRefvaluevalue
      return statesearchKeyword
    

    function onChangeSearchKeywordTypeeventany
      searchKeywordType  eventtargetvalue
      return searchKeywordType
    


    function onChangeStepLevel 

      ifselectStepLevelElRefvalue  undefined
        return
      
      stateselectStepLevel  parseIntselectStepLevelElRefvaluevalue
      return stateselectStepLevel
    

    function returnToStringstepLevelany 
      let stepLevelToStr   
      ifstepLevel  1
        stepLevelToStr  의뢰요청의뢰검토중
      
      ifstepLevel  2
        stepLevelToStr  의뢰승인장례준비중
      
      ifstepLevel  3
        stepLevelToStr  장례진행중
      
      ifstepLevel  4
        stepLevelToStr  장례종료종료확인요청
      
      ifstepLevel  5
        stepLevelToStr  종료확인최종종료
      

      return stepLevelToStr
    

    alert1
    const filteredFunerals  computed  
      alert2
      stateresult  statesearchKeyword

      let filteredFunerals  statefunerals
      
      filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralstepLevel  stateselectStepLevel
      ifstateselectStepLevel  0
        ifsearchKeywordType  title
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeraltitleincludesstatesearchKeyword
      
      ifsearchKeywordType  body
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralbodyincludesstatesearchKeyword
      
      ifsearchKeywordType  funeralHome
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralfuneralHomeincludesstatesearchKeyword
      
      
      else
        ifsearchKeywordType  title
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeraltitleincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      ifsearchKeywordType  body
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralbodyincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      ifsearchKeywordType  funeralHome
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralfuneralHomeincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      

      return filteredFunerals
    


    function loadFunerals
      alert4
      mainApifunerallist
      thenaxiosResponse  
          statefunerals  axiosResponsedatabodyfunerals
      

    

     onMounted 바로 실행하는 것이 아닌 모든 것이 준비되었을때 실행됨
    onMounted  
      alert3
      loadFunerals
    


    return
      state
      filteredFunerals
      searchKeywordElRef
      onInput
      onClickInput
      returnToString
      onChangeSearchKeywordType
      onChangeStepLevel
      selectStepLevelElRef

    

  

script


style scoped
 httpstailwindcomponentscomcomponentblogspostscard 
funeralListsectiongridbody
  minwidth 400px


style


 DB
sql
 장례 테이블 생성
CREATE TABLE funeral 
    id INT10 UNSIGNED NOT NULL PRIMARY KEY AUTOINCREMENT
    regDate DATETIME NOT NULL
    updateDate DATETIME NOT NULL
    head INT10 UNSIGNED NOT NULL 예상인원수
    religion CHAR200 NOT NULL 종교
    startDate DATE NOT NULL 장례시작일
    endDate DATE NOT NULL 장례종료일
    title CHAR200 NOT NULL 
    body TEXT NOT NULL 상세요구사항
    funeralHome CHAR200 NOT NULL 장례식장
    expertId INT10 UNSIGNED NOT NULL
    clientId INT10 UNSIGNED NOT NULL
    stepLevel SMALLINT2 UNSIGNED DEFAULT 2 NOT NULL COMMENT 2의뢰승인장례진행중3장례종료종료확인요청4종료확인최종종료


 장례와 관련된 도우미 그룹 테이블 생성
CREATE TABLE funeralRelAssts
    id INT10 UNSIGNED NOT NULL PRIMARY KEY AUTOINCREMENT
    funeralId INT10 UNSIGNED NOT NULL
    assistantId INT10 UNSIGNED NOT NULL


 도우미가 진행중인 장례 리스팅
SELECT F
IFNULLCname 탈퇴회원 AS extraclientName
IFNULLEname 탈퇴회원 AS extraexpertName
FROM funeral AS F
LEFT JOIN client AS C
ON FclientId  Cid
LEFT JOIN expert AS E
ON FexpertId  Eid
WHERE Fid  
SELECT funeralId 
FROM funeralRelAssts
WHERE assistantId  1

ORDER BY Fid DESC
" />
<!-- GOOGLE+ -->
<meta itemprop="headline" content="Dev_J BLOG" />
<meta itemprop="name" content="Dev_J BLOG" />
<meta itemprop="description" content=" 멤버쪼개기 완료 funeral 테이블 추가 요청수락 진행단계별 버튼 변경 기능 구현까지

 NOTE


프론트엔드

Todo
의뢰인 요청  검토수락  수락진행  종료요청최종종료까지
 1사이클 실행
요청서에서 승인버튼 누르면 장례클래스 생성
도우미 마무리
 장례클래스 생성
 장례클래스와 연관된 도우미 테이블 생성
 모든 장례리스팅
 도우미전문가의 현재 진행중인 my장례 리스팅
  장례리스트에 도우미 현황 나오기

 장례에 도우미 지원
 전문가에서 장례별 도우미 지원현황 확인 후 수락
 도우미에서 내 지원현황 확인취소



백엔드

funeral funeralRelAssts 테이블 추가


br
 주요소스코드

 FuneralListPagevue
html
template
   메인장례 리스트 시작 
  section classfuneralListsection bggray500
    div classh2 bggray500div
    리스트 search 시작
    div classflex h10 funeralListsectionsearch m2 textright roundedmd
      select refselectStepLevelElRef classhfull w14 roundedlmd id changeonChangeStepLevel
        option value0진행단계 전체option
        option value1요청서 검토중option
        option value2장례준비중option
        option value3장례진행중option
        option value4장례종료확인대기중option
        option value5장례종료최종종료option
      select
      select classhfull w14 id changeonChangeSearchKeywordTypeevent
        option valuetitle제목option
        option valuebody내용option
        option valuefuneralHome장례식장option
      select
      input idsearchKeywordElRef refsearchKeywordElRef classhfull wfull pl4 typetext placeholder검색어 입력 valuesearchKeyword keyupenteronInputevent 
      button classw20 textwhite roundedrmd bgblue500 typebutton clickonClickInput검색button
    div
    리스트 search 끝
    리스트 grid 시작
    div classfuneralListsectiongrid grid gridcols1 mdgridcols3 gap3 overflowhidden
      리스트 gridbody 시작
      div classmt6 vbindkeyfuneralid vforfuneral in filteredFunerals
      div classfuneralListsectiongridbody p8 bgwhite m2 border roundedxl
        진행단계
        div classbtnsuccess
          진행단계 returnToStringfuneralstepLevel
        div
        제목
        div classtextcenter m4
          routerlink tofuneraldetailid  funeralid classtextindigo500 fontbold textxl mdtext2xl hovertextgray700
             funeraltitle 
          routerlink
        div
        담당지도사
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          담당지도사 funeralextraexpertName
        h1
        의뢰인명
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          의뢰인 funeralextraclientName
        h1
         장례식장
        h1 classfontsemibold textgray900 leadingnone textxl mt1 mb3 capitalize breaknormal
          장례식장 funeralfuneralHome
        h1
        예상인원
        div classmaxwfull border mt2 p1 pl2 roundedmd
          예상인원
          p classtextbase fontmedium trackingwide textgray600 mt1
               funeralhead 
          p
        div
        종교
        div classmaxwfull border mt2 p1 pl2 roundedmd
          종교
          p classtextbase fontmedium trackingwide textgray600 mt1
               funeralreligion 
          p
        div
        장례기간
        div classmaxwfull border mt2 p1 pl2 roundedmd
          장례기간
          p classtextbase fontmedium trackingwide textgray600 mt1
             시작일  funeralstartDate   종료일  funeralendDate 
          p
        div
        div
          도우미 현황
          div vbindkeyassistantid vforassistant in funeralextraassistantsslice03
             assistantname  도우미
          div
        div
        routerlink tofuneraldetailid  funeralid classblock btnprimary mt2 h10 wfull roundedmd
            상세보기
        routerlink
        routerlink tofuneraldoApplyfuneralId  funeralid classblock btnsecondary mt2 h10 wfull roundedmd
            지원하기
        routerlink
        
      div
      div
      리스트 gridbody 끝
    div
    리스트 grid 끝
  section
   메인지도사 리스트 끝 

template

script langts
import  defineComponent reactive ref getCurrentInstance onMounted computed watch  from vue
import  IFuneral  from types
import  MainApi  from apis

const searchKeywordElRef  refHTMLInputElement
const selectStepLevelElRef  refHTMLInputElement

export default defineComponent
  name FuneralListPageForAsst

props 속성은 컴포넌트 간에 데이터를 전달할 수 있는 컴포넌트 통신 방법입니다 
props 속성을 기억할 때는 상위 컴포넌트에서 하위 컴포넌트로 내려보내는 데이터 속성으로 기억하면 쉽습니다
  props 
    globalShare 
      type Object
      required true
    
  

  setupprops
    const mainApiMainApi  getCurrentInstanceappContextconfigglobalPropertiesmainApi

    const state  reactive
      funerals  as IFuneral
      searchKeyword  as string
      result as string
      selectStepLevel 0
    

    let searchKeywordType  title

    function onInputeventany
      statesearchKeyword  eventtargetvalue
      return statesearchKeyword
    

    function onClickInput 
      ifsearchKeywordElRefvalue  undefined
        return
      

      statesearchKeyword  searchKeywordElRefvaluevalue
      return statesearchKeyword
    

    function onChangeSearchKeywordTypeeventany
      searchKeywordType  eventtargetvalue
      return searchKeywordType
    


    function onChangeStepLevel 

      ifselectStepLevelElRefvalue  undefined
        return
      
      stateselectStepLevel  parseIntselectStepLevelElRefvaluevalue
      return stateselectStepLevel
    

    function returnToStringstepLevelany 
      let stepLevelToStr   
      ifstepLevel  1
        stepLevelToStr  의뢰요청의뢰검토중
      
      ifstepLevel  2
        stepLevelToStr  의뢰승인장례준비중
      
      ifstepLevel  3
        stepLevelToStr  장례진행중
      
      ifstepLevel  4
        stepLevelToStr  장례종료종료확인요청
      
      ifstepLevel  5
        stepLevelToStr  종료확인최종종료
      

      return stepLevelToStr
    

    alert1
    const filteredFunerals  computed  
      alert2
      stateresult  statesearchKeyword

      let filteredFunerals  statefunerals
      
      filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralstepLevel  stateselectStepLevel
      ifstateselectStepLevel  0
        ifsearchKeywordType  title
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeraltitleincludesstatesearchKeyword
      
      ifsearchKeywordType  body
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralbodyincludesstatesearchKeyword
      
      ifsearchKeywordType  funeralHome
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralfuneralHomeincludesstatesearchKeyword
      
      
      else
        ifsearchKeywordType  title
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeraltitleincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      ifsearchKeywordType  body
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralbodyincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      ifsearchKeywordType  funeralHome
        filteredFunerals  statefuneralsfilterfuneralIFuneral  funeralfuneralHomeincludesstatesearchKeyword  funeralstepLevel  stateselectStepLevel
      
      

      return filteredFunerals
    


    function loadFunerals
      alert4
      mainApifunerallist
      thenaxiosResponse  
          statefunerals  axiosResponsedatabodyfunerals
      

    

     onMounted 바로 실행하는 것이 아닌 모든 것이 준비되었을때 실행됨
    onMounted  
      alert3
      loadFunerals
    


    return
      state
      filteredFunerals
      searchKeywordElRef
      onInput
      onClickInput
      returnToString
      onChangeSearchKeywordType
      onChangeStepLevel
      selectStepLevelElRef

    

  

script


style scoped
 httpstailwindcomponentscomcomponentblogspostscard 
funeralListsectiongridbody
  minwidth 400px


style


 DB
sql
 장례 테이블 생성
CREATE TABLE funeral 
    id INT10 UNSIGNED NOT NULL PRIMARY KEY AUTOINCREMENT
    regDate DATETIME NOT NULL
    updateDate DATETIME NOT NULL
    head INT10 UNSIGNED NOT NULL 예상인원수
    religion CHAR200 NOT NULL 종교
    startDate DATE NOT NULL 장례시작일
    endDate DATE NOT NULL 장례종료일
    title CHAR200 NOT NULL 
    body TEXT NOT NULL 상세요구사항
    funeralHome CHAR200 NOT NULL 장례식장
    expertId INT10 UNSIGNED NOT NULL
    clientId INT10 UNSIGNED NOT NULL
    stepLevel SMALLINT2 UNSIGNED DEFAULT 2 NOT NULL COMMENT 2의뢰승인장례진행중3장례종료종료확인요청4종료확인최종종료


 장례와 관련된 도우미 그룹 테이블 생성
CREATE TABLE funeralRelAssts
    id INT10 UNSIGNED NOT NULL PRIMARY KEY AUTOINCREMENT
    funeralId INT10 UNSIGNED NOT NULL
    assistantId INT10 UNSIGNED NOT NULL


 도우미가 진행중인 장례 리스팅
SELECT F
IFNULLCname 탈퇴회원 AS extraclientName
IFNULLEname 탈퇴회원 AS extraexpertName
FROM funeral AS F
LEFT JOIN client AS C
ON FclientId  Cid
LEFT JOIN expert AS E
ON FexpertId  Eid
WHERE Fid  
SELECT funeralId 
FROM funeralRelAssts
WHERE assistantId  1

ORDER BY Fid DESC
" />
<meta itemprop="image" content="images/Dev_J_logo/logo.png" />

<!-- 사이트 타이틀 -->
<title>P.Lamplight - 개발일지(멤버쪼개기 완료, funeral 테이블 추가, 요청수락, 진행단계별 버튼 변경 기능 구현까지) | Dev_J BLOG | ARTICLE DETAIL</title>


<!-- 파비콘 -->
<link rel="shortcut icon" href="images/favicon/favicon.ico" type="image/x-icon">
<link rel="icon" href="images/favicon/favicon.ico" type="image/x-icon">

<!-- 폰트어썸 불러오기 -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">

<!--모바일에서도 PC와 같은 비율 유지-->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!--제이쿼리-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- 하이라이트 라이브러리 추가, 토스트 UI 에디터에서 사용됨 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/highlight.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.4.1/styles/default.min.css">

<!-- 토스트 UI 에디터, 자바스크립트 코어 -->
<script
	src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js" defer></script>

<!-- 코드 미러 라이브러리 추가, 토스트 UI 에디터에서 사용됨 -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.3/codemirror.min.css" />
<!-- 토스트 UI 에디터, CSS 코어 -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />

<!-- 토스트 UI 에디터, 신택스 하이라이트 플러그인 추가 -->
<script src="https://uicdn.toast.com/editor-plugin-code-syntax-highlight/latest/toastui-editor-plugin-code-syntax-highlight.min.js" defer></script>

<!-- app.css 불러오기 -->
<link rel="stylesheet" href="app.css">
<!-- app.js 불러오기 -->
<script src="app.js" defer></script>
<!-- index.js 불러오기 
<script src="index.js" defer></script>
-->
</head>

<body>
<!-- 사이트 박스 시작 -->
<div class="body-content min-height-100vh flex flex-column">
  <!-- 로고바 시작 -->
  <header class="logo-bar con-min-width" id="header">
    <div class="con height-100p flex flex-jc-c" title="HOME">
      <a href="index.html" class="logo flex flex-ai-c"> 
        <img class="logo__img" src="images/Dev_J_logo/logo_transparent.png" alt="">
        <span>
          BLOG
        </span>
      </a>
    </div>
  </header>
  <!-- 로고바 끝 -->

  <!-- 메뉴바 시작-->
  <header class="menu-bar con-min-width visible-md-up">
    <div class="flex flex-jc-sb">
   	 <div class="menu-bar__status-icon" title="Menu">
      <div></div>
      <div></div>
      <div></div>
     </div>
     <a class="search-icon" title="search" href="search.html">
        <i class="fa fa-search"></i>
     </a>
   </div>
   <div class="con hide">
    <nav class="menu-bar__menu">
      <ul class="flex">
          <li title="ABOUT">
            <a href="about.html" class="block">
              <i class="far fa-address-card"></i>
              <span>ABOUT</span>
            </a>
          </li>
          <li>
            <a class="block">
              <i class="fas fa-list"></i>
              <span>ARTICLES</span>
            </a>
            <ul>
              <li title="NOTICE"><a href="notice-list-1.html" class="block"><i class="fas fa-bullhorn"></i> <span>NOTICE BOARD</span></a></li><li title="JAVA"><a href="java-list-1.html" class="block"><i class="fab fa-java"></i> <span>JAVA BOARD</span></a></li><li title="HTML"><a href="html-list-1.html" class="block"><i class="fab fa-html5"></i> <span>HTML & CSS & JS BOARD</span></a></li><li title="MYSQL"><a href="mysql-list-1.html" class="block"><i class="fas fa-database"></i> <span>MySQL BOARD</span></a></li><li title="ETC"><a href="etc-list-1.html" class="block"><i class="fas fa-mouse-pointer"></i> <span>ETC BOARD</span></a></li>
            </ul>
          </li>
          <li>
            <a class="block">
              <i class="fas fa-project-diagram"></i>
              <span>PROJECT</span>
            </a>
            <ul>
              <li title="P_BLOG"><a href="p_blog-list-1.html" class="block"><i class="fab fa-blogger"></i> <span>P.BLOG PROJECT</span></a></li><li title="P_JSP"><a href="p_jsp-list-1.html" class="block"><i class="fas fa-users"></i> <span>P.JSP PROJECT</span></a></li><li title="P_LAMP"><a href="p_lamp-list-1.html" class="block"><i class="fab fa-vuejs"></i> <span>P.Lamplight PROJECT</span></a></li><li title="P_WHAT"><a href="p_what-list-1.html" class="block"><i class="fas fa-file-word"></i> <span>P.WhatIsMyName PROJECT</span></a></li>
            </ul>
          </li>
          <li>
            <a class="block">
              <i class="fas fa-link"></i>
              <span>LINK</span>
            </a>
            <ul>
              <li title="T-STORY">
                <a href="https://cjy324.tistory.com/" target="_blank" class="block">
                  <i class="fas fa-rss-square"></i>
                  <span>T-STORY</span>
                </a>
              </li>
              <li title="GITHUB">
                <a href="https://github.com/cjy324/TIL_Jooyoung#til_jooyoung" target="_blank" class="block">
                  <i class="fab fa-github"></i>
                  <span>GITHUB</span>
                </a>
              </li>
              <li title="GetIT">
                <a href="https://getit.devj.me/" target="_blank" class="block">
                  <i class="fab fa-dev"></i>
                  <span>GetIT</span>
                </a>
              </li>
            </ul>
          </li>
          <li title="STATISTICS">
            <a href="statistics.html" class="block">
              <i class="fas fa-chart-pie"></i>
              <span>STATISTICS</span>
            </a>
          </li>
        </ul>
      </nav>
   </div>
  </header>
  <!-- 메뉴바 끝 -->
  
  <!-- 모바일 사이드 메뉴바 시작 -->
  <header class="mobile-menu-bar con-min-width visible-sm-down">
    <div class="flex flex-jc-sb">
   <div class="mobile-menu-bar__status-icon" title="Menu">
     <div></div>
     <div></div>
     <div></div>
   </div>
    <a class="search-icon" title="search" href="search.html">
        <i class="fa fa-search"></i>
      </a>
   </div>
   <div class="con ">
    <aside class="mobile-side-bar flex flex-column flex-jc-c ">
      <div class="mobile-side-bar_X"><i class="fas fa-times"></i></div>
      <nav class="mobile-side-bar_menu flex">
      <ul class="">
          <li title="ABOUT">
            <a href="about.html" class="block">
              <i class="far fa-address-card"></i>
              <span>ABOUT</span>
            </a>
          </li>
          <li>
            <a class="block">
              <i class="fas fa-list"></i>
              <span>ARTICLES</span>
            </a>
            <ul class="hide2">
              <li title="NOTICE"><a href="notice-list-1.html" class="block"><i class="fas fa-bullhorn"></i> <span>NOTICE BOARD</span></a></li><li title="JAVA"><a href="java-list-1.html" class="block"><i class="fab fa-java"></i> <span>JAVA BOARD</span></a></li><li title="HTML"><a href="html-list-1.html" class="block"><i class="fab fa-html5"></i> <span>HTML & CSS & JS BOARD</span></a></li><li title="MYSQL"><a href="mysql-list-1.html" class="block"><i class="fas fa-database"></i> <span>MySQL BOARD</span></a></li><li title="ETC"><a href="etc-list-1.html" class="block"><i class="fas fa-mouse-pointer"></i> <span>ETC BOARD</span></a></li>
            </ul>
          </li>
          <li>
            <a class="block">
              <i class="fas fa-project-diagram"></i>
              <span>PROJECT</span>
            </a>
            <ul class="hide2">
              <li title="P_BLOG"><a href="p_blog-list-1.html" class="block"><i class="fab fa-blogger"></i> <span>P.BLOG PROJECT</span></a></li><li title="P_JSP"><a href="p_jsp-list-1.html" class="block"><i class="fas fa-users"></i> <span>P.JSP PROJECT</span></a></li><li title="P_LAMP"><a href="p_lamp-list-1.html" class="block"><i class="fab fa-vuejs"></i> <span>P.Lamplight PROJECT</span></a></li><li title="P_WHAT"><a href="p_what-list-1.html" class="block"><i class="fas fa-file-word"></i> <span>P.WhatIsMyName PROJECT</span></a></li>
            </ul>
          </li>
          <li>
            <a class="block">
              <i class="fas fa-link"></i>
              <span>LINK</span>
            </a>
            <ul class="hide2">
              <li title="T-STORY">
                <a href="https://cjy324.tistory.com/" target="_blank" class="block">
                  <i class="fas fa-rss-square"></i>
                  <span>T-STORY</span>
                </a>
              </li>
              <li title="GITHUB">
                <a href="https://github.com/cjy324/TIL_Jooyoung#til_jooyoung" target="_blank" class="block">
                  <i class="fab fa-github"></i>
                  <span>GITHUB</span>
                </a>
              </li>
              <li title="GetIT">
                <a href="https://getit.devj.me/" target="_blank" class="block">
                  <i class="fab fa-dev"></i>
                  <span>GetIT</span>
                </a>
              </li>
            </ul>
          </li>
          <li title="STATISTICS">
            <a href="statistics.html" class="block">
              <i class="fas fa-chart-pie"></i>
              <span>STATISTICS</span>
            </a>
          </li>
        </ul>
      </nav>  
      </aside>
   </div>
  </header>
  
  <!-- 모바일 사이드 메뉴바 끝 --> 
   

  <!-- 메인 컨텐츠 박스 시작 -->
  <main class="main-box flex-grow-1">
  <section class="main-box-section con-min-width">
   <!-- 메인-타이틀바 시작 -->
	<div class="title-bar con-min-width">
		<h1 class="con">
			<i class="fas fa-file-invoice"></i> <span>ARTICLE</span>
		</h1>
	</div>
   <!-- 메인-타이틀바 종료 -->
<!-- Progress-bar -->
<script type="text/javascript"
	src="https://rawcdn.githack.com/mburakerman/prognroll/0feda211643153bce2c69de32ea1b39cdc64ffbe/src/prognroll.js"></script>
<script type="text/javascript">
	$(function() {
		$("body").prognroll({
			height : 10,
			color : "#666666"
		});
		$(".content").prognroll({
			custom : true
		});
	});
</script>

<!-- 메인-상세페이지 시작 -->
<section class="section-2 con-min-width min-height-50vh">
	<div class="con height-100p">
		<div class="article-detail-cell height-100p">
			<div class="article-detail-cell__board-name"><div><span>게시판 : </span><span>P.Lamplight 게시판</span></div></div><div class="article-detail-cell__id"><div><span>번호 : </span><span>74</span></div></div><div class="article-detail-cell__member-id"><div><span>작성자 : </span><span>Dev_J</span></div></div><div class="article-detail-cell__reg-date"><div><span>작성일 : </span><span>2021-04-24 14:57:47</span></div></div><div class="article-detail-cell__update-date"><div><span>수정일 : </span><span>2021-04-24 15:02:47</span></div></div><br><div class="article-detail-cell__title-contents flex flex-jc-fe"><div class="article-detail-cell__hitsCount"><div><span>조회수 : </span><span>0</span></div></div><div class="article-detail-cell__likesCount"><div><span>추천수 : </span><span>0</span></div></div><div class="article-detail-cell__commentsCount"><div><span>댓글수 : </span><span>0</span></div></div></div><div class="article-detail-cell__title"><div><span>제목 : </span><span>P.Lamplight - 개발일지(멤버쪼개기 완료, funeral 테이블 추가, 요청수락, 진행단계별 버튼 변경 기능 구현까지)</span></div></div><nav class="ad"><!-- 구글 애드센스2 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 수평 반응형2 --><ins class="adsbygoogle" style="display: block" data-ad-client="ca-pub-7996879977557531" data-ad-slot="2278060237" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></nav><script type"text/x-template"># 멤버쪼개기 완료, funeral 테이블 추가, 요청수락, 진행단계별 버튼 변경 기능 구현까지

## NOTE

```
<프론트엔드>

Todo
-의뢰인 요청 - 검토(수락) - 수락(진행) - 종료요청(최종종료)까지
 1사이클 실행
-요청서에서 승인버튼 누르면 장례클래스 생성[ㅇ]
-도우미 마무리
 -장례클래스 생성[ㅇ]
 -장례클래스와 연관된 도우미 테이블 생성[ㅇ]
 -모든 장례리스팅[ㅇ]
 -도우미,전문가의 현재 진행중인 my장례 리스팅[ㅇ]
  -장례리스트에 도우미 현황 나오기[ㅇ]

 -장례에 도우미 지원[]
 -전문가에서 장례별 도우미 지원현황 확인 후 수락[]
 -도우미에서 내 지원현황 확인,취소[]

```
```
<백엔드>

-funeral, funeralRelAssts 테이블 추가
```

<br>
## 주요소스코드

### FuneralListPage.vue
```html
<template>
  <!-- 메인-장례 리스트 시작 -->
  <section class="funeralList-section bg-gray-500">
    <div class="h-2 bg-gray-500"></div>
    <!--리스트 search 시작-->
    <div class="flex h-10 funeralList-section-search m-2 text-right rounded-md">
      <select ref="selectStepLevelElRef" class="h-full w-1/4 rounded-l-md" id="" @change="onChangeStepLevel">
        <option value="0">진행단계 전체</option>
        <option value="1">요청서 검토중</option>
        <option value="2">장례준비중</option>
        <option value="3">장례진행중</option>
        <option value="4">장례종료(확인대기중)</option>
        <option value="5">장례종료(최종종료)</option>
      </select>
      <select class="h-full w-1/4" id="" @change="onChangeSearchKeywordType($event)">
        <option value="title">제목</option>
        <option value="body">내용</option>
        <option value="funeralHome">장례식장</option>
      </select>
      <input id="searchKeywordElRef" ref="searchKeywordElRef" class="h-full w-full pl-4" type="text" placeholder="검색어 입력" :value="searchKeyword" @keyup.enter="onInput($event)" >
      <button class="w-20 text-white rounded-r-md bg-blue-500" type="button" @click="onClickInput">검색</button>
    </div>
    <!--리스트 search 끝-->
    <!--리스트 grid 시작-->
    <div class="funeralList-section-grid grid grid-cols-1 md:grid-cols-3 gap-3 overflow-hidden">
      <!--리스트 grid__body 시작-->
      <div class="mt-6" v-bind:key="funeral.id" v-for="funeral in filteredFunerals">
      <div class="funeralList-section-grid__body p-8 bg-white m-2 border rounded-xl">
        <!--진행단계-->
        <div class="btn-success">
          진행단계: {{returnToString(funeral.stepLevel)}}
        </div>
        <!--제목-->
        <div class="text-center m-4">
          <router-link :to="'/funeral/detail?id=' + funeral.id" class="text-indigo-500 font-bold text-xl md:text-2xl hover:text-gray-700">
            {{ funeral.title }}
          </router-link>
        </div>
        <!--담당지도사-->
        <h1 class="font-semibold text-gray-900 leading-none text-xl mt-1 mb-3 capitalize break-normal">
          담당지도사: {{funeral.extra__expertName}}
        </h1>
        <!--의뢰인명-->
        <h1 class="font-semibold text-gray-900 leading-none text-xl mt-1 mb-3 capitalize break-normal">
          의뢰인: {{funeral.extra__clientName}}
        </h1>
         <!--장례식장-->
        <h1 class="font-semibold text-gray-900 leading-none text-xl mt-1 mb-3 capitalize break-normal">
          장례식장: {{funeral.funeralHome}}
        </h1>
        <!--예상인원-->
        <div class="max-w-full border mt-2 p-1 pl-2 rounded-md">
          예상인원
          <p class="text-base font-medium tracking-wide text-gray-600 mt-1">
            -  {{ funeral.head }}
          </p>
        </div>
        <!--종교-->
        <div class="max-w-full border mt-2 p-1 pl-2 rounded-md">
          종교
          <p class="text-base font-medium tracking-wide text-gray-600 mt-1">
            -  {{ funeral.religion }}
          </p>
        </div>
        <!--장례기간-->
        <div class="max-w-full border mt-2 p-1 pl-2 rounded-md">
          장례기간
          <p class="text-base font-medium tracking-wide text-gray-600 mt-1">
            - 시작일: {{ funeral.startDate }} / 종료일: {{ funeral.endDate }}
          </p>
        </div>
        <div>
          도우미 현황
          <div v-bind:key="assistant.id" v-for="assistant in funeral.extra__assistants.slice(0,3)">
            {{ assistant.name }} 도우미
          </div>
        </div>
        <router-link :to="'/funeral/detail?id=' + funeral.id" class="block btn-primary mt-2 h-10 w-full rounded-md">
            상세보기
        </router-link>
        <router-link :to="'/funeral/doApply?funeralId=' + funeral.id" class="block btn-secondary mt-2 h-10 w-full rounded-md">
            지원하기
        </router-link>
        
      </div>
      </div>
      <!--리스트 grid__body 끝-->
    </div>
    <!--리스트 grid 끝-->
  </section>
  <!-- 메인-지도사 리스트 끝 -->

</template>

<t-script lang="ts">
import { defineComponent, reactive, ref, getCurrentInstance, onMounted, computed, watch } from 'vue'
import { IFuneral } from '../types'
import { MainApi } from '../apis'

const searchKeywordElRef = ref<HTMLInputElement>();
const selectStepLevelElRef = ref<HTMLInputElement>();

export default defineComponent({
  name: 'FuneralListPageForAsst',

//props 속성은 컴포넌트 간에 데이터를 전달할 수 있는 컴포넌트 통신 방법입니다. 
//props 속성을 기억할 때는 상위 컴포넌트에서 하위 컴포넌트로 내려보내는 데이터 속성으로 기억하면 쉽습니다
  props: {
    globalShare: {
      type: Object,
      required: true
    },
  },

  setup(props){
    const mainApi:MainApi = getCurrentInstance()?.appContext.config.globalProperties.$mainApi;

    const state = reactive({
      funerals: [] as IFuneral[],
      searchKeyword: '' as string,
      result:'' as string,
      selectStepLevel: 0,
    });

    let searchKeywordType = "title";

    function onInput(event:any){
      state.searchKeyword = event.target.value;
      return state.searchKeyword;
    }

    function onClickInput() {
      if(searchKeywordElRef.value == undefined){
        return;
      }

      state.searchKeyword = searchKeywordElRef.value.value;
      return state.searchKeyword;
    }

    function onChangeSearchKeywordType(event:any){
      searchKeywordType = event.target.value;
      return searchKeywordType;
    };


    function onChangeStepLevel() {

      if(selectStepLevelElRef.value == undefined){
        return;
      }
      state.selectStepLevel = parseInt(selectStepLevelElRef.value?.value);
      return state.selectStepLevel;
    }

    function returnToString(stepLevel:any) {
      let stepLevelToStr = ''; 
      if(stepLevel == 1){
        stepLevelToStr = '의뢰요청(의뢰검토중)';
      }
      if(stepLevel == 2){
        stepLevelToStr = '의뢰승인(장례준비중)';
      }
      if(stepLevel == 3){
        stepLevelToStr = '장례진행중';
      }
      if(stepLevel == 4){
        stepLevelToStr = '장례종료(종료확인요청)';
      }
      if(stepLevel == 5){
        stepLevelToStr = '종료확인(최종종료)';
      }

      return stepLevelToStr;
    }

    //alert("1");
    const filteredFunerals = computed(() => {
      //alert("2");
      state.result = state.searchKeyword;

      let filteredFunerals = state.funerals;
      
      //filteredFunerals = state.funerals.filter((funeral:IFuneral) => funeral.stepLevel === state.selectStepLevel)
      if(state.selectStepLevel == 0){
        if(searchKeywordType == "title"){
        filteredFunerals = state.funerals.filter((funeral:IFuneral) => funeral.title.includes(state.searchKeyword))
      }
      if(searchKeywordType == "body"){
        filteredFunerals = state.funerals.filter((funeral:IFuneral) => funeral.body.includes(state.searchKeyword))
      }
      if(searchKeywordType == "funeralHome"){
        filteredFunerals = state.funerals.filter((funeral:IFuneral) => funeral.funeralHome.includes(state.searchKeyword))
      }
      }
      else{
        if(searchKeywordType == "title"){
        filteredFunerals = state.funerals.filter((funeral:IFuneral) => funeral.title.includes(state.searchKeyword) && funeral.stepLevel === state.selectStepLevel)
      }
      if(searchKeywordType == "body"){
        filteredFunerals = state.funerals.filter((funeral:IFuneral) => funeral.body.includes(state.searchKeyword) && funeral.stepLevel === state.selectStepLevel)
      }
      if(searchKeywordType == "funeralHome"){
        filteredFunerals = state.funerals.filter((funeral:IFuneral) => funeral.funeralHome.includes(state.searchKeyword) && funeral.stepLevel === state.selectStepLevel)
      }
      }

      return filteredFunerals
    })


    function loadFunerals(){
      //alert("4");
      mainApi.funeral_list()
      .then(axiosResponse => {
          state.funerals = axiosResponse.data.body.funerals;
      });

    }

    // onMounted 바로 실행하는 것이 아닌 모든 것이 준비되었을때 실행됨
    onMounted(() => {
      //alert("3");
      loadFunerals();
    });


    return{
      state,
      filteredFunerals,
      searchKeywordElRef,
      onInput,
      onClickInput,
      returnToString,
      onChangeSearchKeywordType,
      onChangeStepLevel,
      selectStepLevelElRef

    }

  }
})
</t-script>


<style scoped>
/* https://tailwindcomponents.com/component/blogs-posts-card */
.funeralList-section-grid__body{
  min-width: 400px;
}

</style>
```

### DB
```sql
# 장례 테이블 생성
CREATE TABLE `funeral` (
    id INT(10) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
    regDate DATETIME NOT NULL,
    updateDate DATETIME NOT NULL,
    `head` INT(10) UNSIGNED NOT NULL, #예상인원수
    religion CHAR(200) NOT NULL, #종교
    `startDate` DATE NOT NULL, #장례시작일
    `endDate` DATE NOT NULL, #장례종료일
    title CHAR(200) NOT NULL, 
    `body` TEXT NOT NULL, #상세요구사항
    funeralHome CHAR(200) NOT NULL, #장례식장
    `expertId` INT(10) UNSIGNED NOT NULL,
    `clientId` INT(10) UNSIGNED NOT NULL,
    stepLevel SMALLINT(2) UNSIGNED DEFAULT 2 NOT NULL COMMENT '(2=의뢰승인(장례진행중),3=장례종료(종료확인요청),4=종료확인(최종종료))'
);

# 장례와 관련된 도우미 그룹 테이블 생성
CREATE TABLE `funeralRelAssts`(
    id INT(10) UNSIGNED NOT NULL PRIMARY KEY AUTO_INCREMENT,
    funeralId INT(10) UNSIGNED NOT NULL,
    assistantId INT(10) UNSIGNED NOT NULL
);

# 도우미가 진행중인 장례 리스팅
SELECT F.*,
IFNULL(C.name, "탈퇴회원") AS extra__clientName,
IFNULL(E.name, "탈퇴회원") AS extra__expertName
FROM `funeral` AS F
LEFT JOIN `client` AS C
ON F.clientId = C.id
LEFT JOIN `expert` AS E
ON F.expertId = E.id
WHERE F.id = (
SELECT funeralId 
FROM funeralRelAssts
WHERE assistantId = 1
)
ORDER BY F.id DESC
```</script><div class="article-detail-cell__body height-70p toast-ui-viewer"><div></div></div><br><div class="article-detail-cell__tag flex flex-wrap"><nav># project</nav><nav># 개발일지</nav><nav># lamplight</nav></div><br><br><nav class="ad"><!-- 구글 애드센스1 --><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><!-- 수평 반응형1 --><ins class="adsbygoogle" style="display: block" data-ad-client="ca-pub-7996879977557531" data-ad-slot="6812185708" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></nav>
			<!-- Disqus api 적용 -->
			<!-- 정확한 페이지 경로 알려주는 기능 추가-->
			<nav>
				<div id="disqus_thread"></div>
				<script>
					var disqus_config = function() {
						this.page.url = 'https://blog.devj.me/article_detail_74.html';
						this.page.identifier = 'article_detail_74.html';
					};
					(function() {
						//DON'T EDIT BELOW THIS LINE
						var d = document, s = d.createElement('script');
						s.src = 'https://devj-blog.disqus.com/embed.js';
						s.setAttribute('data-timestamp', +new Date());
						(d.head || d.body).appendChild(s);
					})();
				</script>
				<noscript>
					Please enable JavaScript to view the
					<a href="https://disqus.com/?ref_noscript">comments powered by
						Disqus.</a>
				</noscript>
			</nav>
		</div>
	</div>
</section>
<!-- 메인-상세페이지 끝 -->
<!-- 메인-상세 하단 메뉴 시작 -->
<section class="section-3 con-min-width">
	<div class="con">
		<div class="article-list-bottom-cell flex flex-jc-c"><div class="./"><a href="article_detail_73.html" class="hover-underline">&lt 이전글</a></div><div class="./"><i class="fas fa-th-list"></i><a href="p_lamp-list-1.html" class="hover-underline"> 목록 </a></div><div class="./"><a href="article_detail_75.html"class="hover-underline">다음글 &gt</a></div></div>
	</div>
</section>
<!-- 메인-상세 하단 메뉴 끝 -->
</section>
</main>
<!-- 메인 컨텐츠 박스 끝 -->
  <!-- 맨 위 버튼 시작 -->
  <nav class="top-button flex flex-jc-c flex-ai-c">
    <div class="">
      <a href="#header">▲ TOP</a> 
    </div>     
  </nav>
  <!-- 맨 위 버튼 끝 -->


  <!-- 푸터 시작 -->
  <footer class="bottom-bar con-min-width">
    <div class="con flex flex-ai-c">
      <a href="index.html" class="logo logo--mini flex flex-ai-c" title="HOME">
        <img class="logo--mini__img" src="images/Dev_J_logo/logo_transparent.png" alt="">
      </a>
      <div class="bottom-bar__site-info">
        <span><i class="far fa-envelope"></i> juy32400@gmail.com</span>
        <br>
        <br>
        <span>COPYRIGHT 2020. Dev_J. All rights reserved.</span>
      </div>
    </div>
  </footer>
  <!-- 푸터 끝 -->
</div>
<!-- 사이트 박스 끝 -->
</body>
</html>